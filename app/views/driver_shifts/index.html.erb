<ul class="nav nav-tabs">
    <li><%= link_to(:"Søk og lagre oppdrag",search_drives_path) %></li>
    <li><%= link_to(:"Mine oppdrag",you_drives_path) %></li>
    <% if Driver.find_by_user_id(current_user.id).id == @driver_id.to_i %>
		<li class="active"><%= link_to(:"Min vaktliste", shifts_you_path)%></li>
	<% else %>
		<li><%= link_to(:"Min vaktliste", shifts_you_path)%></li>
	<% end %>
    <li><%= link_to(:"Alle oppdrag", all_drives_path) %></li>
    <li><%= link_to(:"Administrer", admin_index_path) %></li>
    <li><%= link_to(:Info, info_path) %></li>
</ul>

<h2>Vaktliste for <%= @name %></h2>
<p>Vaktlisten vil bli brukt til å få oversikt når en sjåfør skal være tilgjengelig til å bli satt på oppdrag. M.a.o hvis du ikke har noen vakter vil du ikke dukke opp i søket etter tilgjengelige sjåfører, med unntak når man velger å ignorere vaktlister. </p>
<p>"Fullført?" feltet er regnet ut fra oppgitt dato og dagens dato (<%=  @current_datetime.strftime("%Y-%m-%d") %>).</p>

<div class="row">
	<div class="span6">
<% if @shifts.empty? %>
	<h3> <%= @name %> har ikke oppført noen vakter!</h3>
<% else %>
	<h3 class="muted">Oppførte skift</h3>
	<table id="shift_table" class="table table-striped sortable hover_table">
		<thead>
			<th>ID</th>
			<th>Fra klokken</th>
			<th>Til klokken</th>
			<th>Dato</th>
			<th>Fullført?<th>
		</thead>
		<tbody>
			<% @shifts.each do |shift| %>
				<tr>
					<td><%= shift.id %></td>
					<td><%= shift.start_time.strftime("%H:%M")%></td>
					<td><%= shift.end_time.strftime("%H:%M") %></td>
					<td>
						<% if shift.start_time.to_date == shift.end_time.to_date %>
							<%= shift.start_time.strftime("%Y-%m-%d") %>
						<% else %>
							<%= shift.start_time.strftime("%Y-%m-%d") %> - <%= shift.end_time.strftime("%Y-%m-%d") %> 
						<% end %>
					</td>
					<td>
						<% if @current_datetime >  shift.end_time.to_date %>
							<i class="icon-ok"></i>
						<% else %>
							<i class="icon-remove"></i>
						<% end %>
					</td>
					<td>
						<%= link_to "Slett", :controller => "driver_shifts", :action => "destroy",  :shift_id => shift.id %>
					</td>
				</tr>
			<% end %>
		</tbody>
	</table>
<% end %>
</div>
	<div class="span3">
		<h3 class="muted">Nytt skift</h3>
		<%= form_tag(:controller => "driver_shifts", :action => "create", :driver_id => params[:driver_id]) do %>
			<div class="input-prepend">
				<input type="hidden" name="driver_id" value="<%= @driver_id %>">
				<label class="control-label" for="inputIcon">Dato</label>
				<span class="add-on"><i class="icon-calendar"></i></span>
				<input id="date" type="date" name="date" placeholder="YYYY-MM-DD"	required/>
				<label class="control-label" for="inputIcon">Fra klokken</label>
				<span class="add-on"><i class="icon-time"></i></span>
				<input id="start_time" type="time" name="start_time" placeholder="HH:MM" required/>
				<label class="control-label" for="inputIcon">Til klokken</label>
				<span class="add-on"><i class="icon-time"></i></span>
				<input id="end_time" type="time" name="end_time" placeholder="HH:MM" required/>
			</div>
			<input type="submit" id="time_submit" value="Lagre">
			<% end %>
	</div>
</div>